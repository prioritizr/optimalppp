<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prioritize conservation projects by maximizing expected phylogenetic
diversity with exact algorithms — ppp_exact_phylo_solution • optimalppp</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Prioritize conservation projects by maximizing expected phylogenetic
diversity with exact algorithms — ppp_exact_phylo_solution" />

<meta property="og:description" content="Prioritize funding for conservation projects with phylogenetic data and
using exact algorithms. Unlike other algorithms for solving the
'Project Prioritization Protocol'
(Joseph, Maloney &amp;amp; Possingham 2009), this method can identify
solutions that are guaranteed to be optimal (or within a pre-specified
optimality gap; see Underhill 1994; Rodrigues &amp;amp; Gaston 2002).
As a consequence, it is strongly recommended to use
this method for developing project prioritizations." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">optimalppp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/optimalppp.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/optimalppp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prioritize conservation projects by maximizing expected phylogenetic
diversity with exact algorithms</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/optimalppp/blob/master/R/ppp_exact_phylo_solution.R'><code>R/ppp_exact_phylo_solution.R</code></a></small>
    <div class="hidden name"><code>ppp_exact_phylo_solution.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Prioritize funding for conservation projects with phylogenetic data and
using exact algorithms. Unlike other algorithms for solving the
'Project Prioritization Protocol'
(Joseph, Maloney &amp; Possingham 2009), this method can identify
solutions that are guaranteed to be optimal (or within a pre-specified
optimality gap; see Underhill 1994; Rodrigues &amp; Gaston 2002).
<strong>As a consequence, it is strongly recommended to use
this method for developing project prioritizations.</strong></p>
    
    </div>

    <pre class="usage"><span class='fu'>ppp_exact_phylo_solution</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>tree</span>, <span class='no'>budget</span>, <span class='no'>project_column_name</span>,
  <span class='no'>success_column_name</span>, <span class='no'>action_column_name</span>, <span class='no'>cost_column_name</span>,
  <span class='kw'>locked_in_column_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>locked_out_column_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gap</span> <span class='kw'>=</span> <span class='fl'>1e-06</span>, <span class='kw'>threads</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>number_solutions</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>time_limit</span> <span class='kw'>=</span> <span class='no'>.Machine</span>$<span class='no'>integer.max</span>, <span class='kw'>number_approx_points</span> <span class='kw'>=</span> <span class='fl'>300</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing project data. Here, each row should correspond to
a different project and columns should contain data that correspond to
each project. This object should contain data that denote (i)
the name of each project (specified in the argument to
<code>project_column_name</code>), (ii) the
probability that each project will succeed if all of its actions are funded
(specified in the argument to <code>success_column_name</code>), (iii)
the enhanced probability that each species will persist if it
is funded (specified as the tip labels in the argument to <code>tree</code>),
and (iv) and which actions are associated with which projects
(specified in the action names in the argument to <code>y</code>).
To account for the combined benefits of multiple actions (e.g. baiting
and trapping different invasive species in the same area), additional
projects should be created that indicate the combined cost and
corresponding species' persistence probabilities. Furthermore, this object
must have a baseline project, with a zero cost, that represents the
probability that each species will persist if no other conservation
project is funded.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing the action data. Here, each row should correspond to a
different action and columns should contain data that correspond to
each action. This object should contain data that denote (i)
the name of each action (specified in the argument to
<code>action_column_name</code>), (ii) the cost of each action (specified in the
argument to <code>cost_column_name</code>). If certain actions should be locked
in or out of the solution, then this object should also contain data
that denote (iii) which actions should be locked in (specified using
the argument to <code>locked_in_column_name</code> if relevant) and (iv) which
actions should be locked out (specified using the argument to
<code>locked_out_column_name</code> if relevant).</p></td>
    </tr>
    <tr>
      <th>tree</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/ape/topics/read.tree'>phylo</a></code> phylogenetic tree describing the
evolutionary history of the species affected by the conservation
projects that could potentially be funded. Note that every single
species that is affected by the various conservation projects should
be represented in this tree.</p></td>
    </tr>
    <tr>
      <th>budget</th>
      <td><p><code>numeric</code> value that represents the total budget available
for funding conservation projects.</p></td>
    </tr>
    <tr>
      <th>project_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation project. This argument corresponds to the
argument to <code>x</code>. Note that the project names must not contain any
duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>success_column_name</th>
      <td><p><code>character</code> name of column that
denotes the probability that each project will succeed. This argument
corresponds to the argument to <code>x</code>. This column must have
<code>numeric</code> values which lay between zero and one. No missing values
are permitted.</p></td>
    </tr>
    <tr>
      <th>action_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation action. This argument corresponds to the
argument to <code>y</code>. Note that the project names must not contain any
duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>cost_column_name</th>
      <td><p><code>character</code> name of column that
indicates the cost for funding each action. This argument corresponds
to the argument to <code>y</code>. This column must have <code>numeric</code> values
which are equal to or greater than zero. No missing values are permitted.</p></td>
    </tr>
    <tr>
      <th>locked_in_column_name</th>
      <td><p><code>character</code> name of column that
indicates which actions should be locked into the funding scheme.
This argument corresponds to the argument to <code>y</code>. For
example, it may be desirable to mandate that projects for
iconic species are funded in the prioritization. This column should
contain <code>logical</code> values, and projects associated with <code>TRUE</code>
values are locked into the solution. No missing values are permitted.
Defaults to <code>NULL</code> such that no projects are locked into the
solution.</p></td>
    </tr>
    <tr>
      <th>locked_out_column_name</th>
      <td><p><code>character</code> name of column that
indicates which actions should be locked out of the funding scheme.
This argument corresponds to the argument to <code>y</code>. For
example, it may be desirable to lock out projects for certain species
that are expected to have little support from the public. This column
should contain <code>logical</code> values, and projects associated with
<code>TRUE</code> values are locked out of the solution. No missing values are
permitted. Defaults to <code>NULL</code> such that no projects are locked out of
the solution.</p></td>
    </tr>
    <tr>
      <th>gap</th>
      <td><p><code>numeric</code> optimality gap. This gap should be expressed as
a proportion. For example, to find a solution that is within 10 <!-- % of -->
optimality, then <code>0.1</code> should be supplied. No missing values are
permitted. Defaults to <code>0</code>, so that the optimal solution will be
returned.</p></td>
    </tr>
    <tr>
      <th>threads</th>
      <td><p><code>numeric</code> number of threads for computational processing.
No missing values are permitted. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>number_solutions</th>
      <td><p><code>numeric</code> number of solutions to return. If
the argument is greater than <code>1</code>, then the output will contain the
set number of solutions that are closest to optimality. No missing values
are permitted. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>time_limit</th>
      <td><p><code>numeric</code> maximum number of seconds that should be
spent searching for a solution after formatting the data. Effectively,
defaults to no time limit (but specifically is
<code>.Machine$integer.max</code>). No missing values are permitted.</p></td>
    </tr>
    <tr>
      <th>number_approx_points</th>
      <td><p><code>numeric</code> number of points to use for
approximating the probability that branches will go extent. Larger
values increase the precision of these calculations.
No missing values are permitted. Defaults to <code>300</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> should information be printed while solving
the problem? No missing values are permitted. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object containing the
  solution(s) data. Each row corresponds to a different solution, and
  each column describes a different property of the solution. The object
  contains a column for each project (based on the argument to
  <code>project_column_name</code>) which contains <code>logical</code> values indicating
  if the project was prioritized for funded (<code>TRUE</code>) or not
  (<code>FALSE</code>) in a given solution. Additionally, the object also contains
  the following columns:</p>
<p></p><dl class='dl-horizontal'>

   <dt><code>"solution"</code></dt><dd><p><code>integer</code> solution identifier.</p></dd>

   <dt><code>"method"</code></dt><dd><p><code>character</code> name of method used to produce the
     solution(s).)</p></dd>

   <dt><code>"budget"</code></dt><dd><p><code>numeric</code> budget used for generating each of
     the of the solution(s).</p></dd>

   <dt><code>"obj"</code></dt><dd><p><code>numeric</code> objective value. If phylogenetic data,
     were input, then this column contains the expected phylogenetic
     diversity (Faith 2008) associated with each of the solutions.
     Otherwise, this column contains the sum of the species' weighted
     persistence probabilities .</p></dd>

   <dt><code>"cost"</code></dt><dd><p><code>numeric</code> total cost associated with each of
     of the solution(s).</p></dd>

   <dt><code>"optimal"</code></dt><dd><p><code>logical</code> indicating if each of the
     solution(s) is known to be optimal (<code>TRUE</code>) or not (<code>FALSE</code>.
     Missing values (<code>NA</code>) indicate that optimality is unknown
     (i.e. because the method used to produce the solution(s) does not
     provide any bounds on their quality).</p></dd>

 </dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function works by formulating the 'Project Prioritization
  Protocol' as a mixed integer programming problem (MIP) and solving it
  using the
  <a href='https://www.gurobi.com'>Gurobi optimization software suite</a>.
  Although <a href='https://www.gurobi.com'>Gurobi</a> is a commercial software,
  academics can obtain a <a href='https://user.gurobi.com/download/licenses/free-academic'>special license for no cost</a>.
   After downloading and installing the
  hrefhttps://www.gurobi.comGurobi software suite, the
  <span class="pkg">gurobi</span> package will also need to be installed (see instructions for
  <a href='http://www.gurobi.com/documentation/8.1/quickstart_linux/software_installation_guid.html'>Linux</a>,
  <a href='http://www.gurobi.com/documentation/8.1/quickstart_mac/software_installation_guid.html'>Mac OSX</a>, and
  <a href='http://www.gurobi.com/documentation/8.1/quickstart_windows/software_installation_guid.html'>Windows</a> operating systems).
Finally, the <span class="pkg">gurobi</span> package will also need to be installed (see
instructions for
 <a href='http://www.gurobi.com/documentation/8.1/quickstart_linux/r_installing_the_r_package.html'>Linux</a>,
  <a href='http://www.gurobi.com/documentation/8.1/quickstart_mac/r_installing_the_r_package.html'>Mac OSX</a>, and
  <a href='http://www.gurobi.com/documentation/8.1/quickstart_windows/r_installing_the_r_package.html'>Windows</a> operating systems).</p>
<p>The objective of this problem is to maximize the amount of evolutionary
history that is expected to remain within a specified period of time (e.g.
100 years; i.e. 'expected phylogenetic diversity'; Faith 2008).
Let \(I\) represent the set of conservation actions (indexed by \(i\)).
Let \(C_i\) denote the cost for funding action \(i\), and let \(m\)
define the maximum expenditure (budget) for funding all the actions. Also,
let \(S\) represent each species (indexed by \(s\)). To describe the
evolutionary relationships between the species \(s \in S\),
consider a phylogenetic tree that contains species \(s \in S\)
with branches of known lengths. This tree can be described using
mathematical notation by letting \(B\) represent the branches (indexed by
\(b\)) with lengths \(L_b\) and letting \(T_{bs}\) indicate which
species \(s \in S\) are associated with which phylogenetic
branches \(b \in B\) using zeros and ones. Ideally, the set of
species \(S\) would contain all of the species in the study
area---including non-threatened species and species which are not associated
with any conservation projects---to fully account for the benefits for
funding different projects.</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let \(J\) denote the set of conservation projects
(indexed by \(j\), and let \(A_{ij}\) denote which actions
\(i \in I\) comprise each conservation project
\(j \in J\) using zeros and ones. Next, let \(P_i\) represent
the probability of project \(i\) being successful if it is funded. Also,
let \(B_{sj}\) denote the enhanced probability that each species'
\(s \in S\) associated with the project \(j \in J\)
will persist if all of the actions that comprise project \(j\) are funded
and that project is allocated to species \(s\).</p>
<p>The binary control variables \(X_i\) in this problem indicate whether each
project \(i \in I\) is funded (variable equal to one) or not
(variable equal to zero). The decision variables in this problem are the
\(Y_{j}\), \(Z_{sj}\), \(E_s\), and \(R_b\) variables.
Specifically, the binary \(Y_{j}\) variables indicate if project \(j\)
is funded (variable equal to one) or not (variable equal to zero) based on
which actions are funded; the binary \(Z_{sj}\) variables indicate
if project \(j\) is used to manage species \(s\) (variable equal to one)
or not (variable equal to zero); the semi-continuous \(E_s\) variables
denote the probability that species \(s\) will go extinct; and the
semi-continuous \(R_b\) variables denote the probability that phylogenetic
branch \(b\) will remain.</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten species, let \(S\)
represent the set of ten species and also the number ten).</p>
<p>$$
  \mathrm{Maximize} \space \sum_{b = 0}^{B} L_b R_b \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to} \space R_b = 1 - \prod_{s = 0}^{S}
  ifelse(T_{bs} == 1, \space E_s, \space
  1) \space \forall \space b \in B \space \mathrm{(eqn \space 1b)} \\
  E_s = 1 - \sum_{i = 0}^{I} Y_{is} P_i B_{is} \space \forall \space s \in S
  \space \mathrm{(eqn \space 1c)} \\
  \sum_{i = 0}^{I} C_i \leq m \space
  \mathrm{(eqn \space 1d)} \\
  Z_{sj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1e)} \\
  \sum_{j = 0}^{J} Z_{sj} = 1 \space \forall \space s \in s \space
  \mathrm{eqn \space 1f} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1g)} \\
  R_{b} \geq 0, R_{b} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1h)} \\
  E_{s} \geq 0, E_{s} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1i)} \\
  X_{i}, Y_{j}, Z_{sj} \in [0, 1] space \forall \space i \in I, j \in J, s
  \in S \space \mathrm{(eqn \space 1j)}{
  Maximize sum_b^B L_b R_b (eqn 1a); Subject to:
  R_b = 1 - prod_s^S ifelse(T_{bs} == 1, E_s, 1) for all b in B (eqn 1b),
  E_s = 1 - sum_i^I Y_{is} P_i B_{is} for all s in S (eqn 1c),
  sum_i^I C_i &lt;= m (eqn 1d),
  Z_{sj} &lt;= Y_j for all j in J (eqn 1e),
  sum_j^J Z_{sj} = 1 for all s in s (eqn 1f),
  A_{ij} Y_{j} &lt;= X_{i} for all i I, j in J (eqn 1g),
  R_b &gt;= 0, R_b &gt;= 1 for all b in B (eqn 1h),
  E_s &gt;= 0, E_s &gt;= 1 for all s in S (eqn 1i),
  X_i, Y_j, Z_{sj} in [0, 1] for all i in I, j in J, s in S (eqn 1j)}$$</p>
<p>The objective (eqn 1a) is to maximize the amount of expected phylogenetic
history that will remain in the future. This is expressed as the sum of
branch lengths (\(L_b\)) weighted by the probability that at least one of
the species connected to this branch will not go extinct (\(R_b\)).
Constraints (eqn 1b) state that the probability that a branch will remain
(\(R_b\)) is equal to one minus the probability that all species will go
extinct. Constraints (eqn 1c) calculate the probability that each species
will go extinct according to their allocated project. Constraint (eqn 1d)
ensures that the cost of all the funded actions do not exceed the budget.
Constraints (eqn 1e) ensure that species can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1f) state that each
species can only be allocated to a single project. Constraints (eqn 1g)
ensure that a project cannot be funded unless all of its actions are funded.
Constraints (eqns 1h, 1i) ensure that the probability variables (\(R_b\),
\(E_s\)) remain between zero and one. Constraints (eqns 1h) ensure that
the action funding (\(X_j\)), project funding (\(Y_j\)), and project
allocation (\(Z_{sj}\)) variables are binary.</p>
<p>Although this formulation is a mixed integer quadratically constrained
programming problem (due to eqn 1b), it can be linearized and then solved
using commercial mixed integer programming solvers (e.g. Gurobi). This can
be achieved by substituting the product of the species' extinction
probabilities (eqn 1b) with the sum of the log species' extinction
probabilities and using piecewise linear approximations (described in
Hillier &amp; Price 2005 pp. 390--392) to approximate the exponent of this term.
Although this means the problem can only be solved to a pre-specified level
of precision (controlled via the argument to <code>number_approx_points</code>),
advances in exact algorithm solvers mean that the problem can be solved to a
sufficient degree of precision (e.g. \(1 \times 10^{-5}\)) in a
trivial period of time.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461--1470.</p>
<p>Hillier FS &amp; Price CC (2005) <em>International series in operations
research &amp; management science</em>. Springer.</p>
<p>Joseph LN, Maloney RF &amp; Possingham HP (2009) Optimal allocation of
resources among threatened species: A project prioritization protocol.
<em>Conservation Biology</em>, <strong>23</strong>, 328--338.</p>
<p>Rodrigues AS &amp; Gaston KJ (2002) Optimisation in reserve selection
procedures---why not? <em>Biological Conservation</em>, <strong>107</strong>: 123-129.</p>
<p>Underhill LG (1994) Optimal and suboptimal reserve selection
algorithms. <em>Biological Conservation</em>, <strong>70</strong>: 85--87.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For other methods for solving the 'Project Prioritization Protocol'
  problem, see <code><a href='ppp_heuristic_phylo_solution.html'>ppp_heuristic_phylo_solution</a></code>,
  <code><a href='ppp_manual_phylo_solution.html'>ppp_manual_phylo_solution</a></code>, and
  <code><a href='ppp_random_phylo_solution.html'>ppp_random_phylo_solution</a></code>.
  To visualize the effectiveness of a particular solution, see
  <code><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load built-in data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>, <span class='no'>sim_tree</span>)

<span class='co'># print simulated project data set</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_project_data</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 6 x 13</span><span>
#&gt;   name  success    S1    S2     S3    S4    S5 S1_action S2_action S3_action
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> S1_p…   0.919 0.791 0     0      0     0     TRUE      FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> S2_p…   0.923 0     0.888 0      0     0     FALSE     TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> S3_p…   0.829 0     0     0.502  0     0     FALSE     FALSE     TRUE     
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> S4_p…   0.848 0     0     0      0.690 0     FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> S5_p…   0.814 0     0     0      0     0.617 FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> base…   1     0.298 0.250 0.086</span><span style='text-decoration: underline;'>5</span><span> 0.249 0.182 FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># print simulated action data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_action_data</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 6 x 4</span><span>
#&gt;   name             cost locked_in locked_out
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>           </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> S1_action        94.4 FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> S2_action       101.  FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> S3_action       103.  TRUE      FALSE     
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> S4_action        99.2 FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> S5_action        99.9 FALSE     TRUE      
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> baseline_action   0   FALSE     FALSE     </div><div class='input'>
<span class='co'># print simulated phylogenetic tree data set</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_tree</span>)</div><div class='output co'>#&gt; 
#&gt; Phylogenetic tree with 5 tips and 4 internal nodes.
#&gt; 
#&gt; Tip labels:
#&gt; [1] "S3" "S1" "S5" "S2" "S4"
#&gt; 
#&gt; Rooted; includes branch lengths.</div><div class='input'>
<span class='co'># plot the simulated phylogeny</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>sim_tree</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"simulated phylogeny"</span>)</div><div class='img'><img src='ppp_exact_phylo_solution-1.png' alt='' width='700' height='433' /></div></span><div class='input'><span class='co'># verify if guorbi package is installed</span>
<span class='kw'>if</span> (!<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='no'>gurobi</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
 <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/stop'>stop</a></span>(<span class='st'>"the gurobi R package is not installed."</span>)

<span class='co'># find a solution that meets a budget of 300</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_exact_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>, <span class='no'>sim_tree</span>,
                               <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 exact   2.92    300  295. TRUE    TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># print the names of which projects were funded</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>s1</span>)[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/which'>which</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/unlist'>unlist</a></span>(<span class='no'>s1</span>[<span class='fl'>1</span>, <span class='no'>sim_action_data</span>$<span class='no'>name</span>]))])</div><div class='output co'>#&gt; [1] "solution" "method"   "budget"   "optimal" </div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_exact_phylo_solution-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find a solution that meets a budget of 300 and allocates</span>
<span class='co'># funding for the "S1_project" project. For instance, species "S1" might</span>
<span class='co'># be an iconic species that has cultural and economic importance.</span>
<span class='no'>sim_action_data2</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data</span>
<span class='no'>sim_action_data2</span>$<span class='no'>locked_in</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data2</span>$<span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"S1_project"</span>
<span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_exact_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data2</span>, <span class='no'>sim_tree</span>,
                               <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>,
                               <span class='kw'>locked_in_column_name</span> <span class='kw'>=</span> <span class='st'>"locked_in"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s2</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 exact   2.92    300  295. TRUE    TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data2</span>, <span class='no'>sim_tree</span>, <span class='no'>s2</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_exact_phylo_solution-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find a solution that meets a budget of 300 and does not allocate</span>
<span class='co'># funding for the "S2_project" project. For instance, species "S2"</span>
<span class='co'># might have very little cultural or economic importance. Broadly speaking,</span>
<span class='co'># though, it is better to "lock in" "important" species rather than</span>
<span class='co'># "lock out" unimportant species.</span>
<span class='no'>sim_action_data3</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data</span>
<span class='no'>sim_action_data3</span>$<span class='no'>locked_out</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data3</span>$<span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"S2_project"</span>
<span class='no'>s3</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_exact_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data3</span>, <span class='no'>sim_tree</span>,
                               <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>,
                               <span class='kw'>locked_out_column_name</span> <span class='kw'>=</span> <span class='st'>"locked_out"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s3</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 exact   2.92    300  295. TRUE    TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data3</span>, <span class='no'>sim_tree</span>, <span class='no'>s3</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_exact_phylo_solution-4.png' alt='' width='700' height='433' /></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

