<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Solve the 'Project Prioritization Protocol' problem by manually specifying
a solution — ppp_manual_solution • optimalppp</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Solve the 'Project Prioritization Protocol' problem by manually specifying
a solution — ppp_manual_solution" />

<meta property="og:description" content="Manually specify funding schemes for conservation projects under the
'Project Prioritization Protocol' (Joseph, Maloney &amp;amp; Possingham 2009), and
evaluate their effectiveness (Faith 2008)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">optimalppp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/optimalppp.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/optimalppp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Solve the 'Project Prioritization Protocol' problem by manually specifying
a solution</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/optimalppp/blob/master/R/ppp_manual_solution.R'><code>R/ppp_manual_solution.R</code></a></small>
    <div class="hidden name"><code>ppp_manual_solution.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Manually specify funding schemes for conservation projects under the
'Project Prioritization Protocol' (Joseph, Maloney &amp; Possingham 2009), and
evaluate their effectiveness (Faith 2008).</p>
    
    </div>

    <pre class="usage"><span class='fu'>ppp_manual_solution</span>(<span class='no'>x</span>, <span class='no'>tree</span>, <span class='no'>solution</span>, <span class='no'>project_column_name</span>,
  <span class='no'>cost_column_name</span>, <span class='no'>success_column_name</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing project data. Here, each row should correspond to
a different project and columns should contain data that correspond to
each project. This object should contain data that denote (i)
the name of each project (specified in the argument to
<code>project_column_name</code>), (ii) the cost of each project
(specified in the argument to <code>cost_column_name</code>), (iii) the
probability that each project will succeed if it is funded
(specified in the argument to <code>success</code>),
and (iv) the enhanced probability that each species will persist if it
is funded (specified as the tip labels in the argument to <code>tree</code>).
To account for the combined benefits of multiple actions (e.g. baiting
and trapping different invasive species in the same area), additional
projects should be created that indicate the combined cost and
corresponding species' persistence probabilities. Furthermore, this object
must have a baseline project, with a zero cost, that represents the
probability that each species will persist if no other conservation
project is funded.</p></td>
    </tr>
    <tr>
      <th>tree</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/ape/topics/read.tree'>phylo</a></code> phylogenetic tree describing the
evolutionary history of the species affected by the conservation
projects that could potentially be funded. Note that every single
species that is affected by the various conservation projects should
be represented in this tree.</p></td>
    </tr>
    <tr>
      <th>solution</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object containing the solution
data. Here, each row corresponds to a different solution. This object
should contain a column for each project---with the column name matching
the project name---and the column should contain <code>logical</code> values
that indicate if the project is funded (<code>TRUE</code>) or not (<code>FALSE</code>).
Although additional columns can also be included, they will be ignored.</p></td>
    </tr>
    <tr>
      <th>project_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation project. Note that the project names
must not contain any duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>cost_column_name</th>
      <td><p><code>character</code> name of column that
indicates the cost for funding each project. This column must have
<code>numeric</code> values which are equal to or greater than zero. No missing
values are permitted.</p></td>
    </tr>
    <tr>
      <th>success_column_name</th>
      <td><p><code>character</code> name of column that
denotes the probability that each project will succeed if it is funded.
This column must have <code>numeric</code> values which lay between zero and one.
No missing values are permitted.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object containing the
  solution(s) data. Each row corresponds to a different solution, and
  each column describes a different property of the solution. The object
  contains a column for each project (based on the argument to
  <code>project_column_name</code>) which contains <code>logical</code> values indicating
  if the project was prioritized for funded (<code>TRUE</code>) or not
  (<code>FALSE</code>) in a given solution. Additionally, the object also contains
  the following columns:</p>
<p></p><dl class='dl-horizontal'>

   <dt><code>"objective"</code></dt><dd><p><code>numeric</code> objective value associated with
     each of the solution(s). This corresponds to the expected amount of
     evolutionary history that is retained by each solution (Faith 2008).</p></dd>

   <dt><code>"budget"</code></dt><dd><p><code>numeric</code> budget used for generating each of
     the of the solution(s).</p></dd>

   <dt><code>"cost"</code></dt><dd><p><code>numeric</code> total cost associated with each of
     of the solution(s).</p></dd>

   <dt><code>"optimal"</code></dt><dd><p><code>logical</code> indicating if each of the
     solution(s) is known to be optimal (<code>TRUE</code>) or not (<code>FALSE</code>.
     Missing values (<code>NA</code>) indicate that optimality is unknown
     (i.e. because the method used to produce the solution(s) does not
     provide any bounds on their quality).</p></dd>

   <dt><code>"method"</code></dt><dd><p><code>character</code> name of method used to produce the
     solution(s).)</p></dd>

 </dl>

    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461--1470.</p>
<p>Joseph LN, Maloney RF &amp; Possingham HP (2009) Optimal allocation of
resources among threatened species: A project prioritization protocol.
<em>Conservation Biology</em>, <strong>23</strong>, 328--338.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For other methods for generating solutions for the 'Project
  Prioritization Protocol' problem, see <code><a href='ppp_exact_solution.html'>ppp_exact_solution</a></code>,
  <code><a href='ppp_heuristic_solution.html'>ppp_heuristic_solution</a></code>, and
  <code><a href='ppp_random_solution.html'>ppp_random_solution</a></code>. To visualize the effectiveness of a
  particular solution, see <code><a href='ppp_plot.html'>ppp_plot</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># set seed for reproducibility</span>
<span class='fu'>set.seed</span>(<span class='fl'>500</span>)

<span class='co'># load built-in data</span>
<span class='fu'>data</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>)

<span class='co'># load packages to help with plotting</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='co'># print simulated project data set</span>
<span class='fu'>print</span>(<span class='no'>sim_project_data</span>)</div><div class='output co'>#&gt; # A tibble: 6 x 10
#&gt;   name         cost success locked_in locked_out    S1    S2     S3    S4    S5
#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 S1_project   94.4   0.847 FALSE     FALSE      0.802 0     0      0     0    
#&gt; 2 S2_project  101.    0.969 FALSE     FALSE      0     0.808 0      0     0    
#&gt; 3 S3_project  103.    0.732 FALSE     TRUE       0     0     0.678  0     0    
#&gt; 4 S4_project   99.2   0.979 FALSE     FALSE      0     0     0      0.703 0    
#&gt; 5 S5_project   99.9   0.714 TRUE      FALSE      0     0     0      0     0.657
#&gt; 6 baseline_p~   0     1     FALSE     FALSE      0.293 0.388 0.0120 0.195 0.124</div><div class='input'>
<span class='co'># print simulated phylogenetic tree data set</span>
<span class='fu'>print</span>(<span class='no'>sim_tree</span>)</div><div class='output co'>#&gt; 
#&gt; Phylogenetic tree with 5 tips and 4 internal nodes.
#&gt; 
#&gt; Tip labels:
#&gt; [1] "S3" "S1" "S5" "S2" "S4"
#&gt; 
#&gt; Rooted; includes branch lengths.</div><div class='input'>
<span class='co'># plot the simulated phylogeny</span>
<span class='fu'>plot</span>(<span class='no'>sim_tree</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"simulated phylogeny"</span>)</div><div class='img'><img src='ppp_manual_solution-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># now we will create three solutions</span>
<span class='co'># first, we will initialize a data.frame with all projects defunded</span>
<span class='no'>solutions</span> <span class='kw'>&lt;-</span> <span class='fu'>as.data.frame</span>(<span class='fu'>matrix</span>(<span class='fl'>FALSE</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fu'>nrow</span>(<span class='no'>sim_project_data</span>),
                           <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>3</span>))
<span class='fu'>names</span>(<span class='no'>solutions</span>) <span class='kw'>&lt;-</span> <span class='no'>sim_project_data</span>$<span class='no'>name</span>

<span class='co'># the first solution will have no projects funded except for the base line</span>
<span class='co'># project, so we will make the first value in that column TRUE</span>
<span class='no'>solutions</span>$<span class='no'>baseline_project</span>[<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>

<span class='co'># the second solution will have all projects funded so we will set those</span>
<span class='co'># values to TRUE</span>
<span class='no'>solutions</span>[<span class='fl'>2</span>, ] <span class='kw'>=</span> <span class='fl'>TRUE</span>

<span class='co'># the third solution will have four randomly selected projects funded</span>
<span class='no'>solutions</span>[<span class='fl'>3</span>, <span class='fu'>sample.int</span>(<span class='fu'>nrow</span>(<span class='no'>sim_project_data</span>), <span class='fl'>4</span>)] <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>

<span class='co'># now we can evaluate the solutions</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_manual_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>solutions</span>,
                          <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>)

<span class='co'># print the output</span>
<span class='fu'>print</span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 12
#&gt;   solution objective budget  cost optimal method S1_project S2_project
#&gt;      &lt;int&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;   &lt;chr&gt;  &lt;lgl&gt;      &lt;lgl&gt;     
#&gt; 1        1      1.64     NA    0  NA      manual FALSE      FALSE     
#&gt; 2        2      3.85     NA  498. NA      manual TRUE       TRUE      
#&gt; 3        3      3.42     NA  300. NA      manual FALSE      TRUE      
#&gt; # ... with 4 more variables: S3_project &lt;lgl&gt;, S4_project &lt;lgl&gt;,
#&gt; #   S5_project &lt;lgl&gt;, baseline_project &lt;lgl&gt;</div><div class='input'>
<span class='co'># visualize the effectiveness of the different solutions</span>
<span class='fu'><a href='ppp_plot.html'>ppp_plot</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>,
         <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>) + <span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution 1"</span>)</div><div class='img'><img src='ppp_manual_solution-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='ppp_plot.html'>ppp_plot</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>,
         <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>2</span>) + <span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution 2"</span>)</div><div class='img'><img src='ppp_manual_solution-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='ppp_plot.html'>ppp_plot</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>,
         <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>3</span>) + <span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution 3"</span>)</div><div class='img'><img src='ppp_manual_solution-4.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

