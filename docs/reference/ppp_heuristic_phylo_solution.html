<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prioritize conservation projects by maximizing expected phylogenetic
diversity with heuristic algorithms — ppp_heuristic_phylo_solution • optimalppp</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Prioritize conservation projects by maximizing expected phylogenetic
diversity with heuristic algorithms — ppp_heuristic_phylo_solution" />

<meta property="og:description" content="Prioritize funding for conservation projects using the 'Project
Prioritization Protocol' (Joseph, Maloney &amp;amp; Possingham 2009) with
phylogenetic data and using a stingy heuristic algorithm (Bennett
et al. 2014). Although this algorithm can deliver solutions
that perform better than random, it is extremely unlikely to identify
solutions that are optimal (Underhill 1994; Rodrigues &amp;amp; Gaston 2002)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">optimalppp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/optimalppp.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/optimalppp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prioritize conservation projects by maximizing expected phylogenetic
diversity with heuristic algorithms</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/optimalppp/blob/master/R/ppp_heuristic_phylo_solution.R'><code>R/ppp_heuristic_phylo_solution.R</code></a></small>
    <div class="hidden name"><code>ppp_heuristic_phylo_solution.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Prioritize funding for conservation projects using the 'Project
Prioritization Protocol' (Joseph, Maloney &amp; Possingham 2009) with
phylogenetic data and using a stingy heuristic algorithm (Bennett
<em>et al</em>. 2014). <strong>Although this algorithm can deliver solutions
that perform better than random, it is extremely unlikely to identify
solutions that are optimal (Underhill 1994; Rodrigues &amp; Gaston 2002).</strong></p>
    
    </div>

    <pre class="usage"><span class='fu'>ppp_heuristic_phylo_solution</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>tree</span>, <span class='no'>budget</span>, <span class='no'>project_column_name</span>,
  <span class='no'>success_column_name</span>, <span class='no'>action_column_name</span>, <span class='no'>cost_column_name</span>,
  <span class='kw'>locked_in_column_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>locked_out_column_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>number_solutions</span> <span class='kw'>=</span> <span class='fl'>1L</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing project data. Here, each row should correspond to
a different project and columns should contain data that correspond to
each project. This object should contain data that denote (i)
the name of each project (specified in the argument to
<code>project_column_name</code>), (ii) the
probability that each project will succeed if all of its actions are funded
(specified in the argument to <code>success_column_name</code>), (iii)
the enhanced probability that each species will persist if it
is funded,
and (iv) and which actions are associated with which projects
(specified in the action names in the argument to <code>y</code>).
To account for the combined benefits of multiple actions (e.g. baiting
and trapping different invasive species in the same area), additional
projects should be created that indicate the combined cost and
corresponding species' persistence probabilities. Furthermore, this object
must have a baseline project, with a zero cost, that represents the
probability that each species will persist if no other conservation
project is funded.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing the action data. Here, each row should correspond to a
different action and columns should contain data that correspond to
each action. This object should contain data that denote (i)
the name of each action (specified in the argument to
<code>action_column_name</code>), (ii) the cost of each action (specified in the
argument to <code>cost_column_name</code>). If certain actions should be locked
in or out of the solution, then this object should also contain data
that denote (iii) which actions should be locked in (specified using
the argument to <code>locked_in_column_name</code> if relevant) and (iv) which
actions should be locked out (specified using the argument to
<code>locked_out_column_name</code> if relevant).</p></td>
    </tr>
    <tr>
      <th>tree</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/ape/topics/read.tree'>phylo</a></code> phylogenetic tree describing the
evolutionary history of the species affected by the conservation
projects that could potentially be funded. Note that every single
species that is affected by the various conservation projects should
be represented in this tree.</p></td>
    </tr>
    <tr>
      <th>budget</th>
      <td><p><code>numeric</code> value that represents the total budget available
for funding conservation actions.</p></td>
    </tr>
    <tr>
      <th>project_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation project. This argument corresponds to the
argument to <code>x</code>. Note that the project names must not contain any
duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>success_column_name</th>
      <td><p><code>character</code> name of column that
denotes the probability that each project will succeed. This argument
corresponds to the argument to <code>x</code>. This column must have
<code>numeric</code> values which lay between zero and one. No missing values
are permitted.</p></td>
    </tr>
    <tr>
      <th>action_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation action. This argument corresponds to the
argument to <code>y</code>. Note that the project names must not contain any
duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>cost_column_name</th>
      <td><p><code>character</code> name of column that
indicates the cost for funding each action. This argument corresponds
to the argument to <code>y</code>. This column must have <code>numeric</code> values
which are equal to or greater than zero. No missing values are permitted.</p></td>
    </tr>
    <tr>
      <th>locked_in_column_name</th>
      <td><p><code>character</code> name of column that
indicates which actions should be locked into the funding scheme.
This argument corresponds to the argument to <code>y</code>. For
example, it may be desirable to mandate that projects for
iconic species are funded in the prioritization. This column should
contain <code>logical</code> values, and projects associated with <code>TRUE</code>
values are locked into the solution. No missing values are permitted.
Defaults to <code>NULL</code> such that no projects are locked into the
solution.</p></td>
    </tr>
    <tr>
      <th>locked_out_column_name</th>
      <td><p><code>character</code> name of column that
indicates which actions should be locked out of the funding scheme.
This argument corresponds to the argument to <code>y</code>. For
example, it may be desirable to lock out projects for certain species
that are expected to have little support from the public. This column
should contain <code>logical</code> values, and projects associated with
<code>TRUE</code> values are locked out of the solution. No missing values are
permitted. Defaults to <code>NULL</code> such that no projects are locked out of
the solution.</p></td>
    </tr>
    <tr>
      <th>number_solutions</th>
      <td><p><code>numeric</code> number of solutions to return. If
the argument is greater than <code>1</code>, then the output will contain the
set number of solutions that are closest to optimality. No missing values
are permitted. Defaults to <code>1</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object containing the
  solution(s) data. Each row corresponds to a different solution, and
  each column describes a different property of the solution. The object
  contains a column for each project (based on the argument to
  <code>project_column_name</code>) which contains <code>logical</code> values indicating
  if the project was prioritized for funded (<code>TRUE</code>) or not
  (<code>FALSE</code>) in a given solution. Additionally, the object also contains
  the following columns:</p>
<p></p><dl class='dl-horizontal'>

   <dt><code>"solution"</code></dt><dd><p><code>integer</code> solution identifier.</p></dd>

   <dt><code>"method"</code></dt><dd><p><code>character</code> name of method used to produce the
     solution(s).)</p></dd>

   <dt><code>"budget"</code></dt><dd><p><code>numeric</code> budget used for generating each of
     the of the solution(s).</p></dd>

   <dt><code>"obj"</code></dt><dd><p><code>numeric</code> objective value. If phylogenetic data
     were input, then this column contains the expected phylogenetic
     diversity (Faith 2008) associated with each of the solutions.
     Otherwise, this column contains the expected weighted species richness
     (i.e. the sum of the product between the species' persistence
     probabilities and their weights.</p></dd>

   <dt><code>"cost"</code></dt><dd><p><code>numeric</code> total cost associated with each of
     of the solution(s).</p></dd>

   <dt><code>"optimal"</code></dt><dd><p><code>logical</code> indicating if each of the
     solution(s) is known to be optimal (<code>TRUE</code>) or not (<code>FALSE</code>).
     Missing values (<code>NA</code>) indicate that optimality is unknown
     (i.e. because the method used to produce the solution(s) does not
     provide any bounds on their quality).</p></dd>

 </dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This algorithm aims to identify a set of conservation projects,
each associated with a set of conservation actions, that should be
funded to maximize the amount of evolutionary history that is expected
to persist into the future. Briefly, this algorithm works by starting off
with all conservation actions selected for funding and then begins
iteratively defunding (removing) actions until the budget is met
(Joseph, Maloney &amp; Possingham 2009; Bennett <em>et al</em>. 2014). In a given
iteration, each action is evaluated in terms of the amount of evolutionary
history that is expected to be lost per unit cost when the action is not
funded (based on the 'expected phylogenetic diversity' metric; Faith 2008),
and the action associated with the lowest utility is defunded. Since
projects are only considered funded when all of their associated actions are
also funded---and species only receive benefits from projects that are
funded, and not individual conservation actions---by iteratively removing
actions according to their expected utility, this algorithm may identify
cost-effective funding schemes. Note, however, that this algorithm is
extremely unlikely to identify optimal solutions.</p>
<p>The calculations that underpin this algorithm can be expressed
mathematically. To calculate the utility for funding a given action (\(L\))
among a set of actions (\(L\)), let the expected amount of evolutionary
history that will persist into the future when all the actions are funded
be expressed as \(A(L)\). Also, let the expected amount of evolutionary
history that will persist into the future when all the remaining actions
are funded except for action \(l\) be expressed as \(A(L - l)\).
Furthermore, allow the cost for funding action \(l\) to be \(C_l\).
Given this, the relative benefit (or utility) for funding action \(l\)
(\(U_l\)) in a given iteration can be expressed as:</p>
<p>$$U_l = \frac{A(L) - A(L - l)}{C_l}$$</p>
<p>To calculate the expected amount of evolutionary history that will persist
into the future for a given set of funded actions, we will adopt a new set
of definitions to avoid confusion. Let \(I\) represent a given set of
funded actions (indexed by \(i\)). For example, \(I\) could denote all
of the actions in a given iteration (\(A(L)\)) or all of the actions in a
given iteration except for a specific action (\(A(L - l)\)).
Next, let \(S\) represent each species (e.g. species;
conservation projects (indexed by
\(j\)) given the set of funded actions \(I\). Let \(P_j\) represent
the probability of project \(j\) being successful if
it is funded. To represent the conservation outcome for
funding the projects \(J\), let \(B_{js}\) denote the probability of
persistence for the species \(s\) if project \(j\) is funded and project
\(j\) is used to conserve that species (i.e. it is the best funded
funded project for that species).</p>
<p>The probability that each species will go extinct (\(E_s\)) when a given
set of projects are funded (\(J\)) can then be  expressed as as:</p>
<p>$$E_s = 1 - \mathrm{max}(P_1 \times B_{1s}, \ldots, P_J \times B_{Js})$$</p>
<p>To account for the phylogenetic contributions of funding a project,
consider a phylogenetic tree that contains species \(s \in S\) and
contains branches with known lengths. To describe the tree using mathematical
notation, let \(B\) represent the branches (indexed by \(b\)) with
lengths \(L_b\) and let \(T_{bs}\) indicate which species
\(s \in S\) are associated with which
phylogenetic branches \(b \in B\) (using zeros and ones).</p>
<p>The amount of evolutionary history that is expected to persist when a
given set of projects are funded can then be expressed as:</p>
<p>$$A(I) = \sum_{b = 0}^{B} L_b \times \big(1 - \prod_{s = 0}^{S}
  ifelse(T_{bs} == 1, E_s, 1)\big)$$</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Bennett JR, Elliott G, Mellish B, Joseph LN, Tulloch AI,
Probert WJ, ... &amp; Maloney R (2014) Balancing phylogenetic diversity
and species numbers in conservation prioritization, using a case study of
threatened species in New Zealand. <em>Biological Conservation</em>,
<strong>174</strong>: 47--54.</p>
<p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461--1470.</p>
<p>Joseph LN, Maloney RF, &amp; Possingham HP (2009) Optimal
allocation of resources among threatened species: a project prioritization
protocol. <em>Conservation biology</em>, <strong>23</strong>, 328--338.</p>
<p>Rodrigues AS &amp; Gaston KJ (2002) Optimisation in reserve selection
procedures---why not? <em>Biological Conservation</em>, <strong>107</strong>: 123-129.</p>
<p>Underhill LG (1994) Optimal and suboptimal reserve selection
algorithms. <em>Biological Conservation</em>, <strong>70</strong>: 85--87.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For other methods for generating solutions for the 'Project
  Prioritization Protocol' problem using phylogenetic data, see
  <code><a href='ppp_exact_phylo_solution.html'>ppp_exact_phylo_solution</a></code>
  <code><a href='ppp_manual_phylo_solution.html'>ppp_manual_phylo_solution</a></code>, and
  <code><a href='ppp_random_phylo_solution.html'>ppp_random_phylo_solution</a></code>.
  To visualize the effectiveness of a particular solution, see
  <code><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># set seed for reproducibility</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>500</span>)

<span class='co'># load built-in data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>, <span class='no'>sim_tree</span>)

<span class='co'># print simulated project data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_project_data</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 6 x 13</span><span>
#&gt;   name  success    S1    S2     S3    S4    S5 S1_action S2_action S3_action
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> S1_p~   0.919 0.791 0     0      0     0     TRUE      FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> S2_p~   0.923 0     0.888 0      0     0     FALSE     TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> S3_p~   0.829 0     0     0.502  0     0     FALSE     FALSE     TRUE     
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> S4_p~   0.848 0     0     0      0.690 0     FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> S5_p~   0.814 0     0     0      0     0.617 FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> base~   1     0.298 0.250 0.086</span><span style='text-decoration: underline;'>5</span><span> 0.249 0.182 FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># print simulated action data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_action_data</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 6 x 4</span><span>
#&gt;   name             cost locked_in locked_out
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>           </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> S1_action        94.4 FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> S2_action       101.  FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> S3_action       103.  TRUE      FALSE     
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> S4_action        99.2 FALSE     FALSE     
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> S5_action        99.9 FALSE     TRUE      
#&gt; </span><span style='color: #BCBCBC;'>6</span><span> baseline_action   0   FALSE     FALSE     </div><div class='input'>
<span class='co'># print simulated phylogenetic tree data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>sim_tree</span>)</div><div class='output co'>#&gt; 
#&gt; Phylogenetic tree with 5 tips and 4 internal nodes.
#&gt; 
#&gt; Tip labels:
#&gt; [1] "S3" "S1" "S5" "S2" "S4"
#&gt; 
#&gt; Rooted; includes branch lengths.</div><div class='input'>
<span class='co'># plot the simulated phylogeny</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>sim_tree</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"simulated phylogeny"</span>)</div><div class='img'><img src='ppp_heuristic_phylo_solution-1.png' alt='' width='700' height='433' /></div></span><div class='input'><span class='co'># find a solution that meets a budget of 300</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_heuristic_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>,
                                   <span class='no'>sim_tree</span>, <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>,
                                   <span class='st'>"cost"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 heuri~  2.92    300  295. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># print the names of which actions were funded</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>s1</span>)[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/which'>which</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/unlist'>unlist</a></span>(<span class='no'>s1</span>[<span class='fl'>1</span>, <span class='no'>sim_action_data</span>$<span class='no'>name</span>]))])</div><div class='output co'>#&gt; [1] "solution" "method"   "budget"   "optimal" </div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_heuristic_phylo_solution-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find a solution that meets a budget of 300 and allocates</span>
<span class='co'># funding for the "S1_action" action. For instance, species "S1" might</span>
<span class='co'># be an iconic species that has cultural and economic importance.</span>
<span class='no'>sim_action_data2</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data</span>
<span class='no'>sim_action_data2</span>$<span class='no'>locked_in</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data2</span>$<span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"S1_action"</span>
<span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_heuristic_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data2</span>,
                                   <span class='no'>sim_tree</span>, <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>,
                                   <span class='st'>"cost"</span>,
                                   <span class='kw'>locked_in_column_name</span> <span class='kw'>=</span> <span class='st'>"locked_in"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s2</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 heuri~  2.92    300  295. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data2</span>, <span class='no'>sim_tree</span>, <span class='no'>s2</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_heuristic_phylo_solution-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find a solution that meets a budget of 300 and does not allocate</span>
<span class='co'># funding for the "S2_action" action. For instance, species "S2"</span>
<span class='co'># might have very little cultural or economic importance. Broadly speaking,</span>
<span class='co'># though, it is better to "lock in" "important" species rather than</span>
<span class='co'># "lock out" unimportant species.</span>
<span class='no'>sim_action_data3</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data</span>
<span class='no'>sim_action_data3</span>$<span class='no'>locked_out</span> <span class='kw'>&lt;-</span> <span class='no'>sim_action_data3</span>$<span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"S2_action"</span>
<span class='no'>s3</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_heuristic_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data3</span>,
                                   <span class='no'>sim_tree</span>, <span class='fl'>300</span>, <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>,
                                   <span class='st'>"cost"</span>,
                                   <span class='kw'>locked_out_column_name</span> <span class='kw'>=</span> <span class='st'>"locked_out"</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s3</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 heuri~  2.61    300  294. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      FALSE     FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='ppp_plot_phylo_solution.html'>ppp_plot_phylo_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data3</span>, <span class='no'>sim_tree</span>, <span class='no'>s3</span>,
                        <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>)</div><div class='img'><img src='ppp_heuristic_phylo_solution-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># find all solutions from the heuristic algorithm</span>
<span class='co'># note we can set the budget higher than the total cost of all the</span>
<span class='co'># projects, and the number of solutions to the total number of</span>
<span class='co'># projects to achieve this</span>
<span class='no'>s4</span> <span class='kw'>&lt;-</span> <span class='fu'>ppp_heuristic_phylo_solution</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_action_data</span>,
                                   <span class='no'>sim_tree</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>sim_action_data</span>$<span class='no'>cost</span>) * <span class='fl'>1.1</span>,
                                   <span class='st'>"name"</span>, <span class='st'>"success"</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>,
                                   <span class='kw'>number_solutions</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>sim_action_data</span>))

<span class='co'># print solutions</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>s4</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 6 x 12</span><span>
#&gt;   solution method   obj budget  cost optimal S1_action S2_action S3_action
#&gt;      </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>    
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        1 heuri~  3.13   548.  498. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      TRUE      TRUE     
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>        2 heuri~  3.04   548.  395. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>        3 heuri~  2.92   548.  295. </span><span style='color: #BB0000;'>NA</span><span>      TRUE      TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>        4 heuri~  2.64   548.  200. </span><span style='color: #BB0000;'>NA</span><span>      FALSE     TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>        5 heuri~  2.10   548.  101. </span><span style='color: #BB0000;'>NA</span><span>      FALSE     TRUE      FALSE    
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>        6 heuri~  1.46   548.    0  </span><span style='color: #BB0000;'>NA</span><span>      FALSE     FALSE     FALSE    
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: S4_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>, S5_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span style='color: #949494;'>,
#&gt; #   baseline_action </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>
<span class='co'># plot solution cost against expected phylogenetic diversity</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>obj</span> ~ <span class='no'>cost</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>s4</span>,
     <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Heuristic solutions"</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"Cost ($)"</span>,
     <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"Expected phylogenetic diversity"</span>)</div><div class='img'><img src='ppp_heuristic_phylo_solution-5.png' alt='' width='700' height='433' /></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

