<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot a 'Project Prioritization Protocol' solution — ppp_plot • optimalppp</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Plot a 'Project Prioritization Protocol' solution — ppp_plot" />

<meta property="og:description" content="Create a plot displaying a phylogenetic tree (phylogram) to visualize a
solution to the 'Project Prioritization Protocol' problem. In this plot, each
phylogenetic branch is colored according to probability
that it is expected to persist into the future. Additionally, species that
benefit from at least a single funded project with a non-zero cost are
denoted with a red asterisk symbol." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">optimalppp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/optimalppp.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/optimalppp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot a 'Project Prioritization Protocol' solution</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/optimalppp/blob/master/R/ppp_plot.R'><code>R/ppp_plot.R</code></a></small>
    <div class="hidden name"><code>ppp_plot.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Create a plot displaying a phylogenetic tree (phylogram) to visualize a
solution to the 'Project Prioritization Protocol' problem. In this plot, each
phylogenetic branch is colored according to probability
that it is expected to persist into the future. Additionally, species that
benefit from at least a single funded project with a non-zero cost are
denoted with a red asterisk symbol.</p>
    
    </div>

    <pre class="usage"><span class='fu'>ppp_plot</span>(<span class='no'>x</span>, <span class='no'>tree</span>, <span class='no'>solution</span>, <span class='no'>project_column_name</span>, <span class='no'>cost_column_name</span>,
  <span class='no'>success_column_name</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>asterisk_hjust</span> <span class='kw'>=</span> <span class='fl'>0.007</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> or <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>
table containing project data. Here, each row should correspond to
a different project and columns should contain that correspond to
each project. See the Details section below for more information.</p></td>
    </tr>
    <tr>
      <th>tree</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/ape/topics/read.tree'>phylo</a></code> phylogenetic tree describing the
evolutionary history of the species affected by the conservation
projects that could potentially be funded. Note that every single
species that is affected by the various conservation projects should
be represented in this tree.</p></td>
    </tr>
    <tr>
      <th>solution</th>
      <td><p><code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object containing the solution
data. Here, each row corresponds to a different solution. This object
should contain a column for each project---with the column name matching
the project name---and the column should contain <code>logical</code> values
that indicate if the project is funded (<code>TRUE</code>) or not (<code>FALSE</code>).
Although additional columns can also be included, they will be ignored.</p></td>
    </tr>
    <tr>
      <th>project_column_name</th>
      <td><p><code>character</code> name of column that contains
the name for each conservation project. Note that the project names
must not contain any duplicates or missing values.</p></td>
    </tr>
    <tr>
      <th>cost_column_name</th>
      <td><p><code>character</code> name of column that
indicates the cost for funding each project. This column must have
<code>numeric</code> values which are equal to or greater than zero. No missing
values are permitted.</p></td>
    </tr>
    <tr>
      <th>success_column_name</th>
      <td><p><code>character</code> name of column that
denotes the probability that each project will succeed if it is funded.
This column must have <code>numeric</code> values which lay between zero and one.
No missing values are permitted.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p><code>integer</code> solution to display. This should argument
correspond to a row number in the argument to <code>solution</code>. Defaults
to <code>1</code> such that the solution in the first row of the argument
to <code>solution</code> is plotted.</p></td>
    </tr>
    <tr>
      <th>askterisk_hjust</th>
      <td><p><code>numeric</code> horizontal adjustment parameter to
manually align the asterisks in the plot. Defaults to 0.007.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function requires the <span class="pkg">ggtree</span> (Yu <em>et al.</em> 2017) and
  <span class="pkg">treeio</span> packages. Since these packages are distributed exclusively
  through <a href='https://bioconductor.org'>Bioconductor</a>, and are not
  available on the
  <a href='https://cran.r-project.org/'>Comprehensive R Archive Network</a>,
  please execute the following commands to install them:
  <code>source("https://bioconductor.org/biocLite.R");biocLite("ggtree")</code>.
  If the installation process fails, please consult the <a href='https://bioconductor.org/packages/release/bioc/html/ggtree.html'><span class="pkg">ggtree</span></a> and <a href='https://bioconductor.org/packages/release/bioc/html/treeio.html'><span class="pkg">treeio</span></a> packages' online documentation.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Yu G, Smith DK, Zhu H, Guan Y, &amp; Lam TTY (2017) ggtree: an
R package for visualization and annotation of phylogenetic trees with their
covariates and other associated data. <em>Methods in Ecology and
Evolution</em>, <strong>8</strong>: 28--36.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>To generate solutions for the 'Project
  Prioritization Protocol' problem, see <code><a href='ppp_heuristic_solution.html'>ppp_heuristic_solution</a></code>
  <code><a href='ppp_exact_solution.html'>ppp_exact_solution</a></code>, <code><a href='ppp_manual_solution.html'>ppp_manual_solution</a></code>,
  or <code><a href='ppp_random_solution.html'>ppp_random_solution</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># set seed for reproducibility</span>
<span class='fu'>set.seed</span>(<span class='fl'>500</span>)

<span class='co'># load built-in data</span>
<span class='fu'>data</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>)

<span class='co'># load packages to help with plotting</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='co'># print simulated project data set</span>
<span class='fu'>print</span>(<span class='no'>sim_project_data</span>)</div><div class='output co'>#&gt; # A tibble: 6 x 10
#&gt;   name         cost success locked_in locked_out    S1    S2     S3    S4    S5
#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 S1_project   94.4   0.847 FALSE     FALSE      0.802 0     0      0     0    
#&gt; 2 S2_project  101.    0.969 FALSE     FALSE      0     0.808 0      0     0    
#&gt; 3 S3_project  103.    0.732 FALSE     TRUE       0     0     0.678  0     0    
#&gt; 4 S4_project   99.2   0.979 FALSE     FALSE      0     0     0      0.703 0    
#&gt; 5 S5_project   99.9   0.714 TRUE      FALSE      0     0     0      0     0.657
#&gt; 6 baseline_p…   0     1     FALSE     FALSE      0.293 0.388 0.0120 0.195 0.124</div><div class='input'>
<span class='co'># print simulated phylogenetic tree data set</span>
<span class='fu'>print</span>(<span class='no'>sim_tree</span>)</div><div class='output co'>#&gt; 
#&gt; Phylogenetic tree with 5 tips and 4 internal nodes.
#&gt; 
#&gt; Tip labels:
#&gt; [1] "S3" "S1" "S5" "S2" "S4"
#&gt; 
#&gt; Rooted; includes branch lengths.</div><div class='input'>
<span class='co'># plot the simulated phylogeny</span>
<span class='fu'>plot</span>(<span class='no'>sim_tree</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"simulated phylogeny"</span>)</div><div class='img'><img src='ppp_plot-1.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='no'>solutions</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>S1_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>FALSE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>),
                        <span class='kw'>S2_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>),
                        <span class='kw'>S4_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>),
                        <span class='kw'>S3_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>FALSE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>),
                        <span class='kw'>S5_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>),
                        <span class='kw'>baseline_project</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>))

<span class='fu'>print</span>(<span class='no'>solutions</span>)</div><div class='output co'>#&gt;   S1_project S2_project S4_project S3_project S5_project baseline_project
#&gt; 1      FALSE       TRUE       TRUE      FALSE       TRUE             TRUE
#&gt; 2      FALSE      FALSE      FALSE      FALSE      FALSE             TRUE
#&gt; 3       TRUE       TRUE       TRUE       TRUE       TRUE             TRUE</div><div class='input'>
<span class='co'># create random some solutions with a budget of 700</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ppp_random_solution.html'>ppp_random_solution</a></span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='fl'>700</span>,
                          <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>, <span class='kw'>number_solutions</span> <span class='kw'>=</span> <span class='fl'>10</span>)

<span class='co'># print output</span>
<span class='fu'>print</span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; # A tibble: 10 x 12
#&gt;    solution objective budget  cost optimal method S1_project S2_project
#&gt;       &lt;int&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;   &lt;chr&gt;  &lt;lgl&gt;      &lt;lgl&gt;     
#&gt;  1        1      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  2        2      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  3        3      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  4        4      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  5        5      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  6        6      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  7        7      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  8        8      3.85    700  498. NA      random TRUE       TRUE      
#&gt;  9        9      3.85    700  498. NA      random TRUE       TRUE      
#&gt; 10       10      3.85    700  498. NA      random TRUE       TRUE      
#&gt; # ... with 4 more variables: S3_project &lt;lgl&gt;, S4_project &lt;lgl&gt;,
#&gt; #   S5_project &lt;lgl&gt;, baseline_project &lt;lgl&gt;</div><div class='input'>
<span class='co'># plot the first solution</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>)</div><div class='img'><img src='ppp_plot-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># plot the second solution</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='img'><img src='ppp_plot-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># since this function returns a ggplot2 plot object, we can customize the</span>
<span class='co'># appearance of the plot using standard ggplot2 commands!</span>
<span class='co'># for example, we can add a title</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution"</span>)</div><div class='img'><img src='ppp_plot-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># we could also also set the minimum and maximum values in the color ramp to</span>
<span class='co'># correspond to those in the data, rather than being capped at 0 and 1</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_color_gradientn</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"Probability of\npersistence"</span>,
                      <span class='kw'>colors</span> <span class='kw'>=</span> <span class='kw pkg'>viridisLite</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/viridisLite/topics/viridis'>inferno</a></span>(<span class='fl'>150</span>, <span class='kw'>begin</span> <span class='kw'>=</span> <span class='fl'>0</span>,
                                                    <span class='kw'>end</span> <span class='kw'>=</span> <span class='fl'>0.9</span>,
                                                    <span class='kw'>direction</span> <span class='kw'>=</span> -<span class='fl'>1</span>)) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution"</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'colour' is already present. Adding another scale for 'colour',</span>
#&gt; <span class='message'>which will replace the existing scale.</span></div><div class='img'><img src='ppp_plot-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># we could also change the color ramp</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_color_gradient</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"Probability of\npersistence"</span>,
                     <span class='kw'>low</span> <span class='kw'>=</span> <span class='st'>"red"</span>, <span class='kw'>high</span> <span class='kw'>=</span> <span class='st'>"black"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution"</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'colour' is already present. Adding another scale for 'colour',</span>
#&gt; <span class='message'>which will replace the existing scale.</span></div><div class='img'><img src='ppp_plot-6.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># we could even hide the legend if desired</span>
<span class='fu'>ppp_plot</span>(<span class='no'>sim_project_data</span>, <span class='no'>sim_tree</span>, <span class='no'>s1</span>, <span class='st'>"name"</span>, <span class='st'>"cost"</span>, <span class='st'>"success"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_color_gradient</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"Probability of\npersistence"</span>,
                     <span class='kw'>low</span> <span class='kw'>=</span> <span class='st'>"red"</span>, <span class='kw'>high</span> <span class='kw'>=</span> <span class='st'>"black"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/theme.html'>theme</a></span>(<span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"hide"</span>) +
<span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span>(<span class='st'>"solution"</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'colour' is already present. Adding another scale for 'colour',</span>
#&gt; <span class='message'>which will replace the existing scale.</span></div><div class='img'><img src='ppp_plot-7.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

