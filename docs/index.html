<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Optimal Project Prioritization Protocol • optimalppp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Optimal Project Prioritization Protocol">
<meta property="og:description" content="Prioritize conservation projects for funding under limited
    budgets. To identify optimal solutions, the 'Gurobi' optimizer will need to
    be installed (available from &lt;https://www.gurobi.com&gt;).">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">optimalppp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/optimalppp.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/optimalppp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<!--- README.md is generated from README.Rmd. Please edit that file -->
<div id="optimal-project-prioritization-protocol" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#optimal-project-prioritization-protocol" class="anchor"></a>Optimal Project Prioritization Protocol</h1></div>

<p><strong>This package is still under development and not ready for use. Please do not use this package yet.</strong></p>
<p>The <em>optimalppp R</em> package provides methods for prioritizing funding of conservation projects using the ‘Protect Prioritization Protocol’. Projects can be prioritized by maximizing expected species richness or expected phylogenetic diversity. Prioritizations can be generated using a range of methods, such as exact algorithms which can identify optimal solutions, heuristic algorithms which have conventionally been used to identify solutions, and by randomly funding projects. This package also provides the functionality to visualize how well solutions maintain biodiversity.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The latest development version of the <em>optimalppp R</em> package can be installed using the following code. Please note that you will need install the <em>ggtree</em> package from Bioconductor since it is not available on <a href="https://cran.r-project.org/">The Comprehensive R Archive Network</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(devtools))
  <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"prioritizr/optimalppp"</span>)
<span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(ggtree))
  devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_bioc</a></span>(<span class="st">"ggtree"</span>)</code></pre></div>
<p>Please note that you will also need to install the <a href="http://www.gurobi.com/">Gurobi optimization suite</a> and <a href="https://www.gurobi.com/documentation/8.1/refman/r_api_overview.html"><em>gurobi R</em> package</a>. For instructions on installing these softwares, please refer to <a href="https://cran.r-project.org/web/packages/prioritizr/vignettes/gurobi_installation.html">this installation guide</a>.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Here we will provide a short example showing how the <em>optimalppp R</em> package can be used to prioritize funding for conservation projects. To start off, we will set the seed for the random number generator to ensure you get the same results as shown here, set some default behavior for the <em>R</em> session, load the <em>optimalppp R</em> package, and load the <em>ggtree R</em> package to plot phylogenetic trees.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">500</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(optimalppp)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggtree)</code></pre></div>
<p>Now we will load some data sets that are distributed with the package. First, we will load the <code>sim_tree</code> object. This object describes the evolutionary relationships between 5 simulated species (named S1, S2, S3, …, S5). The length of each phylogenetic branch corresponds to millions of years of evolutionary history, and the last common ancestor for all these species occurred approximately 2 million years ago.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(sim_tree)

<span class="co"># plot tree</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/ggtree/topics/ggtree">ggtree</a></span>(sim_tree) <span class="op">+</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/ggtree/topics/geom_tiplab">geom_tiplab</a></span>(<span class="dt">size =</span> <span class="fl">2.5</span>) <span class="op">+</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/ggtree/topics/geom_treescale">geom_treescale</a></span>(<span class="dt">width =</span> <span class="dv">2</span>, <span class="dt">x =</span> <span class="dv">0</span>, <span class="dt">offset =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Next, we will load the <code>sim_action_data</code> object. This object stores information about various conservation actions in a tabular format (i.e. <code>tibble</code>). Each row corresponds to a different action, and each column describes different properties associated with the actions. These actions correspond to specific management actions that have known costs. For example, they may relate to baiting or trapping sites of conservation importance. In this table, the <code>"name"</code> column contains the name of each action, and the <code>"cost"</code> action denotes the cost of funding each project. It also contains additional columns for customizing the solutions, but we will ignore them for now. Note that the last project—the <code>"baseline_action"</code>—has a zero cost and is used subsequently to represent the baseline probability for species when no conservation actions are funded for them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(sim_action_data)

<span class="co"># print table</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(sim_action_data))</code></pre></div>
<pre><code>##              name      cost locked_in locked_out
## 1       S1_action  94.39929     FALSE      FALSE
## 2       S2_action 100.99137     FALSE      FALSE
## 3       S3_action 103.22583      TRUE      FALSE
## 4       S4_action  99.24274     FALSE      FALSE
## 5       S5_action  99.90791     FALSE       TRUE
## 6 baseline_action   0.00000     FALSE      FALSE</code></pre>
<p>Additionally, we will load the <code>sim_project_data</code> object. This object stores information about various conservation projects in a tabular format (i.e. <code>tibble</code>). Each row corresponds to a different project, and each column describes various properties associated with the projects. These projects correspond to groups of conservation actions. For example, a conservation project may pertain to a set of conservation actions that relate to a single species or single geographic locality. In this table, the <code>"name"</code> column contains the name of each project, the <code>"success"</code> column denotes the probability of each project succeeding if it is funded, the <code>"S1"</code>–<code>"SN"</code> columns show the enhanced probability of each species persisting if the project is funded, and the <code>"S1_action"</code>–<code>"SN_action"</code> columns indicate which actions are associated with which project. Note that the last project—the <code>"baseline_project"</code>—is associated with the <code>"baseline_action"</code> action. This project has a zero cost and represents the baseline probability of each species persisting if no other project is funded. Finally, although most projects in this example directly relate to a single species, you can input projects that directly affect the persistence of multiple species.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(sim_project_data)

<span class="co"># print table</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(sim_project_data))</code></pre></div>
<pre><code>##               name   success        S1        S2        S3        S4
## 1       S1_project 0.9190985 0.7905800 0.0000000 0.0000000 0.0000000
## 2       S2_project 0.9232556 0.0000000 0.8881011 0.0000000 0.0000000
## 3       S3_project 0.8293499 0.0000000 0.0000000 0.5020887 0.0000000
## 4       S4_project 0.8475053 0.0000000 0.0000000 0.0000000 0.6899938
## 5       S5_project 0.8137868 0.0000000 0.0000000 0.0000000 0.0000000
## 6 baseline_project 1.0000000 0.2977965 0.2500224 0.0864612 0.2489246
##          S5 S1_action S2_action S3_action S4_action S5_action
## 1 0.0000000      TRUE     FALSE     FALSE     FALSE     FALSE
## 2 0.0000000     FALSE      TRUE     FALSE     FALSE     FALSE
## 3 0.0000000     FALSE     FALSE      TRUE     FALSE     FALSE
## 4 0.0000000     FALSE     FALSE     FALSE      TRUE     FALSE
## 5 0.6166465     FALSE     FALSE     FALSE     FALSE      TRUE
## 6 0.1820005     FALSE     FALSE     FALSE     FALSE     FALSE
##   baseline_action
## 1           FALSE
## 2           FALSE
## 3           FALSE
## 4           FALSE
## 5           FALSE
## 6            TRUE</code></pre>
<p>Let us assume that our resources are limited such that we can only spend, at most, $200 on funding conservation projects. In other words, our budget is capped at $200. Now, given the project data (<code>sim_project_data</code>), the species’ evolutionary relationships (<code>sim_tree</code>), and this budget (<code>200</code>), So, let’s cut to the chase and find an optimal solution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># solve problem</span>
s1 &lt;-<span class="st"> </span><span class="kw"><a href="reference/ppp_exact_phylo_solution.html">ppp_exact_phylo_solution</a></span>(<span class="dt">x =</span> sim_project_data, <span class="dt">y =</span> sim_action_data,
                               <span class="dt">tree =</span> sim_tree, <span class="dt">budget =</span> <span class="dv">200</span>,
                               <span class="dt">project_column_name =</span> <span class="st">"name"</span>,
                               <span class="dt">success_column_name =</span> <span class="st">"success"</span>,
                               <span class="dt">action_column_name =</span> <span class="st">"name"</span>,
                               <span class="dt">cost_column_name =</span> <span class="st">"cost"</span>)

<span class="co"># print solution</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(s1))</code></pre></div>
<pre><code>##   solution method      obj budget    cost optimal S1_action S2_action
## 1        1  exact 2.447308    200 193.642    TRUE      TRUE     FALSE
##   S3_action S4_action S5_action baseline_action
## 1     FALSE      TRUE     FALSE            TRUE</code></pre>
<p>The object <code>s1</code> contains the solution and also various statistics associated with the solution in a tabular format (i.e. <code>tibble</code>). Here, each row corresponds to a different solution. Specifically, the <code>"solution"</code> column contains an identifier for the solution (which may be useful for methods that output multiple solutions), the <code>"obj"</code> column contains the objective value (i.e. the expected phylogenetic diversity for this problem; Faith 2008), the <code>"budget"</code> column stores the budget used for generating the solution, the <code>"cost"</code> column stores the cost of the solution, the <code>"optimal"</code> column indicates if the solution is known to be optimal (<code>NA</code> values mean the optimality is unknown), and the <code>"method"</code> column contains the name of the method used to generate the solution. The remaining columns (<code>"S1_project"</code>, <code>"S2_project"</code>, <code>"S3_project"</code>, …, <code>"SN_project"</code>, and <code>"baseline_project"</code>) indicate if each project was prioritized for funding in the solution.</p>
<p>Here, the objective value (in the <code>"obj"</code> column) denotes the amount of evolutionary history that is expected to persist (i.e. 2.447 million years). Put simply, solutions that are expected to result in better conservation outcomes will be associated with a greater objective value. Since tabular data can be difficult to intuit, let’s visualize how well this solution would maintain the different branches in the phylogeny. Note that species which receive any funding are denoted with an asterisk.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># visualize solution</span>
<span class="kw"><a href="reference/ppp_plot_phylo_solution.html">ppp_plot_phylo_solution</a></span>(sim_project_data, sim_action_data, sim_tree, s1,
                        <span class="dt">project_column_name =</span>  <span class="st">"name"</span>,
                        <span class="dt">success_column_name =</span> <span class="st">"success"</span>,
                        <span class="dt">action_column_name =</span> <span class="st">"name"</span>,
                        <span class="dt">cost_column_name =</span> <span class="st">"cost"</span>) <span class="op">+</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/ggtree/topics/geom_treescale">geom_treescale</a></span>(<span class="dt">width =</span> <span class="dv">2</span>, <span class="dt">x =</span> <span class="dv">0</span>, <span class="dt">offset =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="700" style="display: block; margin: auto;"></p>
<p>This has just been a taster of the <em>optimalppp R</em> package. For more information, see the <a href="https://prioritizr.github.io/optimalppp/articles/optimalppp.html">package vignette</a>.</p>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>Please use the following citation to cite the <em>optimalppp R</em> package in publications:</p>
<p><strong>This package is still under development and not ready for use. Please do not use this package yet.</strong></p>
<p>Hanson JO, Schuster R, Strimas-Mackey M, Bennett J, (2018). optimalppp: Optimal Project Prioritization Protocol. R package version 0.0.0.4. Available at <a href="https://github.com/prioritizr/optimalppp" class="uri">https://github.com/prioritizr/optimalppp</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/prioritizr/optimalppp">https://​github.com/​prioritizr/​optimalppp</a>
</li>
<li>Report a bug at <br><a href="https://github.com/prioritizr/optimalppp/issues">https://​github.com/​prioritizr/​optimalppp/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://jeffrey-hanson.com">Jeffrey O Hanson</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>
<a href="http://www.richard-schuster.com/">Richard Schuster</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://strimas.com">Matthew Strimas-Mackey</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/Lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/prioritizr/optimalppp"><img src="https://img.shields.io/travis/prioritizr/optimalppp/master.svg?label=Linux%20%26%20Mac%20OSX" alt="Travis Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jeffreyhanson/optimalppp"><img src="https://img.shields.io/appveyor/ci/jeffreyhanson/optimalppp/master.svg?label=Windows" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/prioritizr/optimalppp?branch=master"><img src="https://codecov.io/github/prioritizr/optimalppp/coverage.svg?branch=master" alt="Coverage Status"></a></li>
<li><a href="https://CRAN.R-project.org/package=optimalppp"><img src="http://www.r-pkg.org/badges/version/optimalppp" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com/">Richard Schuster</a>, <a href="http://strimas.com">Matthew Strimas-Mackey</a>, <a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
